<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subcity Death Certificate - Ethiopia</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .certificate-card {
      background-color: white;
      border-radius: 10px;
      border: 1px solid #ddd;
      max-width: 900px;
      margin: 20px auto;
    }

    .header {
      background-color: #f0f0f0;
      border-radius: 10px 10px 0 0;
    }

    .emblem {
      filter: grayscale(30%);
      height: 80px;
    }

    .section-title {
      color: #2c3e50;
      margin-top: 20px;
      margin-bottom: 15px;
      padding-bottom: 5px;
      border-bottom: 2px solid #eaeaea;
    }

    #generatedCertificate {
      background-color: #fff;
      border: 1px solid #ccc;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: none;
    }

    .signatures p {
      width: 80%;
      margin: 0 auto;
    }

    @media (max-width: 768px) {
      .certificate-card {
        margin: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <!-- Form Card -->
    <div id="formCard" class="certificate-card shadow-lg">
      <!-- Header -->
      <div class="header text-center py-3 border-bottom">
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Emblem_of_Ethiopia.svg" alt="Emblem" class="emblem">
        <h1 class="mt-2">Death Certificate</h1>
        <p class="text-muted">Issued by: <strong id="subcityHeader">[Subcity Name] Administration</strong></p>
      </div>

      <!-- Form -->
      <form id="deathCertificateForm" class="p-4">
        <!-- Deceased Info -->
        <h4 class="section-title">Deceased Information</h4>
        <div class="row g-3 mb-4">
          <div class="col-md-6">
            <label for="fullName" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="fullName" required>
          </div>
          <div class="col-md-3">
            <label for="gender" class="form-label">Gender</label>
            <select class="form-select" id="gender" required>
              <option value="">Select...</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="dob" class="form-label">Date of Birth</label>
            <input type="date" class="form-control" id="dob" required>
          </div>
          <div class="col-md-6">
            <label for="birthPlace" class="form-label">Place of Birth (Kebele/Woreda)</label>
            <input type="text" class="form-control" id="birthPlace" required>
          </div>
          <div class="col-md-6">
            <label for="subcity" class="form-label">Subcity of Residence</label>
            <input type="text" class="form-control" id="subcity" required>
          </div>
          <div class="col-md-6">
            <label for="kebeleId" class="form-label">Kebele ID Number</label>
            <input type="text" class="form-control" id="kebeleId" required>
          </div>
        </div>

        <!-- Death Details -->
        <h4 class="section-title">Death Details</h4>
        <div class="row g-3 mb-4">
          <div class="col-md-4">
            <label for="deathDate" class="form-label">Date of Death</label>
            <input type="date" class="form-control" id="deathDate" required>
          </div>
          <div class="col-md-4">
            <label for="deathTime" class="form-label">Time of Death</label>
            <input type="time" class="form-control" id="deathTime" required>
          </div>
          <div class="col-md-4">
            <label for="deathPlace" class="form-label">Place of Death</label>
            <select class="form-select" id="deathPlace" required>
              <option value="">Select...</option>
              <option value="Hospital">Hospital</option>
              <option value="Home">Home</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="col-md-8">
            <label for="cause" class="form-label">Cause of Death</label>
            <textarea class="form-control" id="cause" rows="2" required></textarea>
          </div>
          <div class="col-md-4">
            <label for="burialPermit" class="form-label">Burial Permit No.</label>
            <input type="text" class="form-control" id="burialPermit" required>
          </div>
        </div>

        <!-- Attestation -->
        <h4 class="section-title">Attestation</h4>
        <div class="row g-3 mb-4">
          <div class="col-md-6">
            <label for="issuerName" class="form-label">Issuing Officer's Name</label>
            <input type="text" class="form-control" id="issuerName" required>
          </div>
          <div class="col-md-6">
            <label for="issuerTitle" class="form-label">Title</label>
            <input type="text" class="form-control" id="issuerTitle" value="Head of Subcity Civil Registry" required>
          </div>
          <div class="col-md-6">
            <label for="doctorName" class="form-label">Medical Certifier's Name</label>
            <input type="text" class="form-control" id="doctorName" required>
          </div>
          <div class="col-md-6">
            <label for="doctorLicense" class="form-label">Medical License No.</label>
            <input type="text" class="form-control" id="doctorLicense" required>
          </div>
        </div>

        <!-- Footer -->
        <div class="border-top pt-3">
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="declaration" required>
            <label class="form-check-label" for="declaration">
              I confirm that the information provided is accurate.
            </label>
          </div>
          <button type="submit" class="btn btn-primary">Generate Certificate</button>
        </div>
      </form>
    </div>

    <!-- Generated Certificate (Hidden Initially) -->
    <div id="generatedCertificate" class="certificate-card p-4 mt-4">
      <div class="text-center">
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Emblem_of_Ethiopia.svg" alt="Emblem" class="emblem">
        <h2 class="mt-2">OFFICIAL DEATH CERTIFICATE</h2>
        <p class="text-muted">Issued by: <strong id="certSubcity">[Subcity Name] Administration</strong></p>
        <p class="text-muted">Certificate No: <strong id="certNumber">DC-XXXX-XXXX</strong></p>
      </div>

      <div class="row mt-4">
        <div class="col-md-6">
          <p><strong>Full Name:</strong> <span id="certName"></span></p>
          <p><strong>Gender:</strong> <span id="certGender"></span></p>
          <p><strong>Date of Birth:</strong> <span id="certDob"></span></p>
          <p><strong>Place of Birth:</strong> <span id="certBirthPlace"></span></p>
          <p><strong>Kebele ID:</strong> <span id="certKebeleId"></span></p>
        </div>
        <div class="col-md-6">
          <p><strong>Date of Death:</strong> <span id="certDeathDate"></span></p>
          <p><strong>Time of Death:</strong> <span id="certDeathTime"></span></p>
          <p><strong>Place of Death:</strong> <span id="certDeathPlace"></span></p>
          <p><strong>Cause of Death:</strong> <span id="certCause"></span></p>
          <p><strong>Burial Permit No:</strong> <span id="certBurialPermit"></span></p>
        </div>
      </div>

      <div class="signatures mt-5 row">
        <div class="col-md-6">
          <p class="border-top pt-2">Issuing Officer: <strong id="certIssuer"></strong></p>
          <p class="text-muted"><small>Title: <span id="certIssuerTitle"></span></small></p>
        </div>
        <div class="col-md-6">
          <p class="border-top pt-2">Medical Certifier: <strong id="certDoctor"></strong></p>
          <p class="text-muted"><small>License No: <span id="certDoctorLicense"></span></small></p>
        </div>
      </div>

      <div class="mt-4 text-center">
        <button id="printBtn" class="btn btn-success me-2">Print Certificate</button>
        <button id="newFormBtn" class="btn btn-outline-secondary">Create New</button>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('deathCertificateForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      if (!this.checkValidity()) {
        alert('Please fill all required fields!');
        return;
      }

      // Update certificate with form data
      document.getElementById('certName').textContent = document.getElementById('fullName').value;
      document.getElementById('certGender').textContent = document.getElementById('gender').value;
      document.getElementById('certDob').textContent = formatDate(document.getElementById('dob').value);
      document.getElementById('certBirthPlace').textContent = document.getElementById('birthPlace').value;
      document.getElementById('certKebeleId').textContent = document.getElementById('kebeleId').value;
      document.getElementById('certSubcity').textContent = document.getElementById('subcity').value + " Subcity";
      document.getElementById('certDeathDate').textContent = formatDate(document.getElementById('deathDate').value);
      document.getElementById('certDeathTime').textContent = document.getElementById('deathTime').value;
      document.getElementById('certDeathPlace').textContent = document.getElementById('deathPlace').value;
      document.getElementById('certCause').textContent = document.getElementById('cause').value;
      document.getElementById('certBurialPermit').textContent = document.getElementById('burialPermit').value;
      document.getElementById('certIssuer').textContent = document.getElementById('issuerName').value;
      document.getElementById('certIssuerTitle').textContent = document.getElementById('issuerTitle').value;
      document.getElementById('certDoctor').textContent = document.getElementById('doctorName').value;
      document.getElementById('certDoctorLicense').textContent = document.getElementById('doctorLicense').value;
      
      // Generate a random certificate number
      document.getElementById('certNumber').textContent = 'DC-' + 
        document.getElementById('subcity').value.substring(0, 3).toUpperCase() + '-' + 
        new Date().getFullYear() + '-' + 
        Math.floor(1000 + Math.random() * 9000);

      // Show certificate, hide form
      document.getElementById('formCard').classList.add('d-none');
      document.getElementById('generatedCertificate').style.display = 'block';
    });

    // Print functionality
    document.getElementById('printBtn').addEventListener('click', function() {
      window.print();
    });

    // New form functionality
    document.getElementById('newFormBtn').addEventListener('click', function() {
      document.getElementById('deathCertificateForm').reset();
      document.getElementById('formCard').classList.remove('d-none');
      document.getElementById('generatedCertificate').style.display = 'none';
    });

    // Helper function to format dates
    function formatDate(dateString) {
      if (!dateString) return '';
      const options = { year: 'numeric', month: 'short', day: 'numeric' };
      return new Date(dateString).toLocaleDateString('en-US', options);
    }
  </script>
</body>
</html>